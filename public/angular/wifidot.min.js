(function(){angular.module("wifidotApp",["ngRoute","ngSanitize"]);function o(o,t){o.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location/:locationid",{templateUrl:"/locationDetail/locationDetail.view.html",controller:"locationDetailCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode(true)}angular.module("wifidotApp").config(["$routeProvider","$locationProvider",o])})();(function(){angular.module("wifidotApp").controller("homeCtrl",o);o.$inject=["$scope","wifidotData","geolocation"];function o(o,t,e){if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}var i=this;i.pageHeader={title:"WiFiDot",strapline:"Find places to work with wifi near you!"};i.sidebar={content:"Looking for wifi and a seat? WiFiDot helps you find places to work when out and about. Perhaps with coffee, cake or a pint? Let WiFiDot help you find the place you're looking for."};i.message="Checking your location";i.getData=function(o){var e=o.coords.latitude,n=o.coords.longitude;i.message="Search for nearby places";t.locationByCoords(e,n).success(function(o){i.message=o.length>0?"":"No locations found nearby";i.data={locations:o}}).error(function(o){i.message="Sorry,something's gone wrong, please try again later"})};i.showError=function(t){o.$apply(function(){i.message=t.message})};i.noGeo=function(){o.$apply(function(){i.message="Geolocation not supported by this brower."})};e.getPosition(i.getData,i.showError,i.noGeo)}})();(function(){angular.module("wifidotApp").controller("aboutCtrl",o);function o(){var o=this;o.pageHeader={title:"About WiFiDot"};o.main={content:"WiFiDot was created to help people find places to sit down and get a bit of work done.\n\nWiFiDot 是一个帮助人们找到一个有wifi的地方，在这个地方人们可以完成一些紧急的工作。"}}})();(function(){angular.module("wifidotApp").controller("locationDetailCtrl",o);o.$inject=["$routeParams","wifidotData"];function o(o,t){var e=this;e.sidebar={context:"is on WiFiDot because it has accessible wifi and spance to sit down with your laptop and get some work done.",callToAction:"if you've been and you like it - or if you don't - please leave a review to help other people just like you."};e.locationid=o.locationid;t.locationById(e.locationid).success(function(o){e.data={location:o};e.pageHeader={title:e.data.location.name};console.log(e.data.location)}).error(function(o){console.log(o)})}})();(function(){angular.module("wifidotApp").service("geolocation",o);function o(){var o=function(o,t,e){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(o,t)}else{e()}};return{getPosition:o}}})();(function(){angular.module("wifidotApp").service("wifidotData",o);o.$inject=["$http"];function o(o){var t=function(t,e){return o.get("/api/locations?lng="+e+"&lat="+t+"&maxDistance=20000000000")};var e=function(t){return o.get("/api/locations/"+t)};return{locationByCoords:t,locationById:e}}})();(function(){angular.module("wifidotApp").filter("formatDistance",t);var o=function(o){return!isNaN(parseFloat(o))&&isFinite(o)};function t(){return function(t){var e,i;if(t>=0&&o(t)){if(t>1){e=parseFloat(t).toFixed(1);i="km"}else{e=parseInt(t*1e3,10);i="m"}return e+i}else{return"?"}}}})();(function(){angular.module("wifidotApp").filter("addHtmlLineBreaks",o);function o(){return function(o){var t=o.replace(/\n/g,"<br/>");return t}}})();(function(){angular.module("wifidotApp").directive("ratingStars",o);function o(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();(function(){angular.module("wifidotApp").directive("footerGeneric",o);function o(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("wifidotApp").directive("navigation",o);function o(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("wifidotApp").directive("pageHeader",o);function o(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();